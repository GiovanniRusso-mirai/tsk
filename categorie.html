<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TSK OFFICIAL BRACKETS - Live System</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700;900&family=Montserrat:wght@600;800&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --bg-color: #f4f7f6;
            --card-bg: #ffffff;
            --primary-kick: #2980b9;
            --primary-lotta: #8e44ad;
            --primary-kumite: #c0392b;
            --text-dark: #2c3e50;
            --text-light: #7f8c8d;
            --border-radius: 12px;
        }

        body { font-family: 'Roboto', sans-serif; background: var(--bg-color); color: var(--text-dark); margin: 0; padding: 0; }
        
        .hero {
            background: linear-gradient(135deg, #2c3e50 0%, #000000 100%);
            color: white; padding: 30px 20px; text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        .hero img { width: 100px; height: 100px; object-fit: cover; border-radius: 50%; border: 3px solid white; box-shadow: 0 0 15px rgba(255,255,255,0.3); }
        .hero h1 { margin: 15px 0 5px; font-family: 'Montserrat', sans-serif; font-size: 1.8rem; letter-spacing: 1px; text-transform: uppercase; }
        .hero p { margin: 0; font-size: 0.9rem; opacity: 0.8; }

        .nav-container { display: flex; justify-content: center; gap: 15px; margin: -25px auto 30px; position: relative; z-index: 10; padding: 0 15px; flex-wrap: wrap; }
        .nav-btn {
            border: none; padding: 12px 25px; border-radius: 30px; font-weight: 700; cursor: pointer;
            background: white; color: var(--text-dark); box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: all 0.3s ease; display: flex; align-items: center; gap: 8px; font-size: 0.9rem;
        }
        .nav-btn.active { color: white; transform: translateY(-3px); box-shadow: 0 6px 12px rgba(0,0,0,0.2); }
        .nav-btn[data-target="kick"].active { background: var(--primary-kick); }
        .nav-btn[data-target="lotta"].active { background: var(--primary-lotta); }
        .nav-btn[data-target="kumite"].active { background: var(--primary-kumite); }

        .container { max-width: 1100px; margin: 0 auto; padding: 0 20px 50px; }
        .discipline-section { display: none; animation: fadeIn 0.5s ease-in-out; }
        .discipline-section.active { display: block; }

        .cat-block { 
            background: var(--card-bg); border-radius: var(--border-radius); margin-bottom: 25px; 
            overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.05); border: 1px solid rgba(0,0,0,0.05);
        }
        .cat-header {
            padding: 15px 20px; cursor: pointer; display: flex; justify-content: space-between; align-items: center;
            background: #fff; border-bottom: 1px solid #f0f0f0; transition: background 0.2s;
        }
        .cat-header:hover { background: #f9f9f9; }
        .cat-title { font-weight: 700; font-family: 'Montserrat', sans-serif; font-size: 1.1rem; color: var(--text-dark); }
        .cat-badge { font-size: 0.75rem; background: #eee; padding: 4px 10px; border-radius: 20px; color: #666; font-weight: 600; }
        
        .cat-body { padding: 20px; display: block; }
        .match-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; }

        .match-card {
            background: white; border: 1px solid #eee; border-radius: 8px; position: relative;
            box-shadow: 0 2px 4px rgba(0,0,0,0.03); overflow: hidden;
        }
        .kick .match-card { border-left: 4px solid var(--primary-kick); }
        .lotta .match-card { border-left: 4px solid var(--primary-lotta); }
        .kumite .match-card { border-left: 4px solid var(--primary-kumite); }

        .match-info { 
            padding: 8px 12px; background: #f8f9fa; font-size: 0.75rem; color: #999; font-weight: bold; 
            border-bottom: 1px solid #eee; display: flex; justify-content: space-between;
        }
        .derby-tag { color: #e74c3c; background: #fadbd8; padding: 1px 5px; border-radius: 3px; font-size: 0.65rem; }

        .competitor { padding: 12px 15px; display: flex; justify-content: space-between; align-items: center; }
        .competitor:first-of-type { border-bottom: 1px dashed #eee; }
        
        .comp-details { display: flex; flex-direction: column; width: 100%; }
        .comp-name { font-weight: 700; font-size: 0.95rem; color: #333; text-transform: uppercase; }
        .comp-meta { font-size: 0.75rem; color: #7f8c8d; margin-top: 2px; }
        .comp-gym { font-size: 0.7rem; color: #95a5a6; font-style: italic; margin-top: 2px; }

        .vs-circle {
            position: absolute; top: 50%; left: -12px; transform: translateY(-50%);
            width: 24px; height: 24px; background: white; border: 2px solid #ddd; border-radius: 50%;
            display: flex; align-items: center; justify-content: center; font-size: 0.65rem; font-weight: bold; color: #aaa;
            z-index: 2; margin-top: 13px;
        }

        .winner-card {
            background: linear-gradient(135deg, #fff9c4 0%, #fff 100%);
            border: 2px solid #f1c40f; text-align: center; padding: 20px; border-radius: 8px;
        }
        .win-icon { font-size: 2rem; color: #f1c40f; margin-bottom: 10px; display: block; }
        .win-label { font-size: 0.8rem; font-weight: 800; color: #f39c12; text-transform: uppercase; letter-spacing: 1px; }

        .search-container { max-width: 600px; margin: 20px auto; padding: 0 15px; position: relative; }
        .search-input { width: 100%; padding: 12px 20px 12px 45px; border-radius: 25px; border: 2px solid #e0e0e0; font-size: 1rem; box-sizing: border-box; transition: 0.3s; }
        .search-input:focus { border-color: #2c3e50; outline: none; }
        .search-icon { position: absolute; left: 30px; top: 50%; transform: translateY(-50%); color: #aaa; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

<header class="hero">
    <img src="https://giovannirusso-mirai.github.io/tsk/299940804_510546830876553_8892043649465700842_n.png" alt="TSK Logo">
    <h1>TSK President Cup</h1>
    <p>Sistema Ufficiale Gestione Accoppiamenti</p>
</header>

<div class="nav-container">
    <button class="nav-btn active" onclick="switchTab('kick')" data-target="kick"><i class="fas fa-bolt"></i> Kick Jitsu</button>
    <button class="nav-btn" onclick="switchTab('lotta')" data-target="lotta"><i class="fas fa-hand-rock"></i> Lotta a Terra</button>
    <button class="nav-btn" onclick="switchTab('kumite')" data-target="kumite"><i class="fas fa-users"></i> Kumitè Kids</button>
</div>

<div class="search-container">
    <i class="fas fa-search search-icon"></i>
    <input type="text" id="searchInput" class="search-input" placeholder="Cerca atleta, categoria o palestra..." onkeyup="filterContent()">
</div>

<div class="container">
    <div id="kick" class="discipline-section active"></div>
    <div id="lotta" class="discipline-section"></div>
    <div id="kumite" class="discipline-section"></div>
</div>

<script>
    // ===============================================
    // 1. DATABASE ATLETI
    // ===============================================
    const rawData = [
        // KICK JITSU
        {d:'kick', n:`MATTEO PESCE`, s:'M', w:75.0, a:15, g:`ASD BUSHIDO`},
        {d:'kick', n:`IVAN CASABURI`, s:'M', w:38.6, a:13, g:`TAI SHIN KAI`},
        {d:'kick', n:`ANTONIO TESSITORE`, s:'M', w:57.0, a:10, g:`TAI SHIN KAI`},
        {d:'kick', n:`MARIO BATTISTA`, s:'M', w:46.7, a:11, g:`TAI SHIN KAI`},
        {d:'kick', n:`MICHELE BORTONE`, s:'M', w:67.0, a:11, g:`TAI SHIN KAI`},
        {d:'kick', n:`GIUSEPPE SIENO`, s:'M', w:58.1, a:12, g:`TAI SHIN KAI`},
        {d:'kick', n:`SAMUELE CHIARIELLO`, s:'M', w:34.0, a:12, g:`TAI SHIN KAI`},
        {d:'kick', n:`FIORELLA CARBISIERO`, s:'F', w:60.0, a:13, g:`TAI SHIN KAI`},
        {d:'kick', n:`ALESSANDRA PETRILLO`, s:'F', w:57.0, a:13, g:`TAI SHIN KAI`},
        {d:'kick', n:`FABIO DI SANTO`, s:'M', w:42.0, a:11, g:`TAI SHIN KAI`},
        {d:'kick', n:`DOMENICO DI GIORGIO`, s:'M', w:81.0, a:14, g:`TAI SHIN KAI`},
        {d:'kick', n:`PASQUALE BELARDO`, s:'M', w:73.5, a:12, g:`TAI SHIN KAI`},
        {d:'kick', n:`LUCA D'AMBRA`, s:'M', w:42.0, a:13, g:`TAI SHIN KAI`},
        {d:'kick', n:`ALESSANDRO GRANIGLIA`, s:'M', w:71.0, a:15, g:`SSD LIFE`},
        {d:'kick', n:`RAOUL GIANLAVIGNA`, s:'M', w:70.1, a:15, g:`SSD LIFE`},
        {d:'kick', n:`CHRISTIAN CORRADO`, s:'M', w:50.0, a:14, g:`SSD LIFE`},
        {d:'kick', n:`MATTEO COZZOLINO`, s:'M', w:60.0, a:14, g:`SSD LIFE`},
        {d:'kick', n:`FRANCESCO CAPPETTA`, s:'M', w:45.0, a:14, g:`SSD LIFE`},
        {d:'kick', n:`GABRIEL CACCIOPPOLI`, s:'M', w:63.0, a:14, g:`SSD LIFE`},
        {d:'kick', n:`RAFFAELE BORRELLI`, s:'M', w:54.0, a:12, g:`SSD LIFE`},
        {d:'kick', n:`JASMINE DI MARZO`, s:'F', w:89.0, a:12, g:`SSD LIFE`},
        {d:'kick', n:`VITTORIA MARTUSCIELLO`, s:'F', w:63.0, a:12, g:`SSD LIFE`},
        {d:'kick', n:`SIMONE CATURANO`, s:'M', w:34.0, a:12, g:`SSD LIFE`},
        {d:'kick', n:`FABRIZIO MINOPOLI`, s:'M', w:39.0, a:12, g:`SSD LIFE`},
        {d:'kick', n:`CHRISTIAN CATURANO`, s:'M', w:26.0, a:11, g:`SSD LIFE`},
        {d:'kick', n:`CHRISTIAN DE ANGELIS`, s:'M', w:33.0, a:10, g:`SSD LIFE`},
        {d:'kick', n:`ROMEO MONTELLA`, s:'M', w:28.0, a:10, g:`SSD LIFE`},
        {d:'kick', n:`GABRIELE IMPROTA`, s:'M', w:44.0, a:11, g:`SSD LIFE`},
        {d:'kick', n:`VINCENZO OMBRA`, s:'M', w:44.0, a:10, g:`SSD LIFE`},
        {d:'kick', n:`ALESSANDRO TONELLI`, s:'M', w:54.0, a:10, g:`SSD LIFE`},
        {d:'kick', n:`LUIGI DEL SOLE`, s:'M', w:27.0, a:9, g:`SSD LIFE`},
        {d:'kick', n:`MARIO INGENITO`, s:'M', w:39.0, a:10, g:`SSD LIFE`},
        {d:'kick', n:`VINCENZO DI VICINO`, s:'M', w:21.0, a:7, g:`SSD LIFE`},
        {d:'kick', n:`SANTORO MELYSSA`, s:'F', w:25.0, a:11, g:`ASD CS BODY ART`},
        {d:'kick', n:`VIETRI ILARIA`, s:'F', w:26.0, a:11, g:`ASD CS BODY ART`},
        {d:'kick', n:`PLAITANO LIDIA`, s:'F', w:45.0, a:10, g:`ASD CS BODY ART`},
        {d:'kick', n:`MAZZEO LINDA`, s:'F', w:29.0, a:11, g:`ASD CS BODY ART`},
        {d:'kick', n:`NAPPI ALESSANDRA`, s:'F', w:33.0, a:11, g:`ASD CS BODY ART`},
        {d:'kick', n:`CASABURI RAFFAELLA`, s:'F', w:68.0, a:13, g:`ASD CS BODY ART`},
        {d:'kick', n:`LANDI MICHELA`, s:'F', w:48.0, a:14, g:`ASD CS BODY ART`},
        {d:'kick', n:`RICCO MORGAN`, s:'M', w:63.0, a:10, g:`ASD CS BODY ART`},
        {d:'kick', n:`VITALE PIETRO`, s:'M', w:40.0, a:11, g:`ASD CS BODY ART`},
        {d:'kick', n:`CASTELLUCCIO GIUSEPPE`, s:'M', w:45.0, a:10, g:`ASD CS BODY ART`},
        {d:'kick', n:`CASABURI ALFONSO`, s:'M', w:57.0, a:13, g:`ASD CS BODY ART`},
        {d:'kick', n:`ALFIERO FRANCESCO`, s:'M', w:29.0, a:12, g:`ASD CS BODY ART`},

        // KUMITE KIDS
        {d:'kumite', n:`LEONARDO OLIVA`, s:'M', w:20.5, a:3, g:`ASD BUSHIDO`},
        {d:'kumite', n:`GIUSEPPE PASCARELLA`, s:'M', w:30.0, a:6, g:`TAI SHIN KAI`},
        {d:'kumite', n:`RAFFAELA FERRARA`, s:'F', w:28.0, a:7, g:`TAI SHIN KAI`},
        {d:'kumite', n:`GABRIEL FERRARA`, s:'M', w:21.0, a:6, g:`TAI SHIN KAI`},
        {d:'kumite', n:`ANTONIO FUSCO`, s:'M', w:21.0, a:6, g:`TAI SHIN KAI`},
        {d:'kumite', n:`VERONICA CASTALDO`, s:'F', w:36.0, a:8, g:`TAI SHIN KAI`},
        {d:'kumite', n:`MARIA BENCIVENGA`, s:'F', w:38.0, a:8, g:`TAI SHIN KAI`},
        {d:'kumite', n:`PIETRO FORTINO`, s:'M', w:45.0, a:9, g:`TAI SHIN KAI`},
        {d:'kumite', n:`ARTEM PEREHKREST`, s:'M', w:35.0, a:7, g:`TAI SHIN KAI`},
        {d:'kumite', n:`ANTONIO DI MURO`, s:'M', w:42.0, a:9, g:`TAI SHIN KAI`},
        {d:'kumite', n:`RAFFAELE DI MURO`, s:'M', w:22.0, a:6, g:`TAI SHIN KAI`},
        {d:'kumite', n:`VITO BORTONE`, s:'M', w:21.0, a:6, g:`TAI SHIN KAI`},
        {d:'kumite', n:`EDUARDO PEZZULLO`, s:'M', w:25.0, a:7, g:`TAI SHIN KAI`},
        {d:'kumite', n:`REBECCA MICILLO`, s:'F', w:32.0, a:8, g:`TAI SHIN KAI`},
        {d:'kumite', n:`SARA IOVINELLA`, s:'F', w:36.0, a:8, g:`TAI SHIN KAI`},
        {d:'kumite', n:`DOMENICO MOZZILLO`, s:'M', w:23.0, a:8, g:`TAI SHIN KAI`},
        {d:'kumite', n:`GIOIA BELARDO`, s:'F', w:30.0, a:10, g:`TAI SHIN KAI`},
        {d:'kumite', n:`MARIO BUONANNO`, s:'M', w:32.0, a:6, g:`TAI SHIN KAI`},
        {d:'kumite', n:`ROBERTO RUSSO`, s:'M', w:42.0, a:9, g:`TAI SHIN KAI`},
        {d:'kumite', n:`MATTHIAS LONGOBARDI`, s:'M', w:31.0, a:7, g:`SSD LIFE`},
        {d:'kumite', n:`VINCENZO CHIANESE`, s:'M', w:22.0, a:6, g:`SSD LIFE`},

        // LOTTA A TERRA
        {d:'lotta', n:`ALESSANDRO PESCE`, s:'M', w:40.0, a:10, g:`ASD BUSHIDO`},
        {d:'lotta', n:`AARON CALCE`, s:'M', w:54.0, a:12, g:`ASD BUSHIDO`},
        {d:'lotta', n:`MATTEO MASI`, s:'M', w:46.0, a:11, g:`ASD BUSHIDO`},
        {d:'lotta', n:`GIOVANNI ROTONDO`, s:'M', w:45.0, a:9, g:`ASD BUSHIDO`},
        {d:'lotta', n:`VINCENZO STABILE`, s:'M', w:29.0, a:8, g:`ASD BUSHIDO`},
        {d:'lotta', n:`ANTONIA DI STASIO`, s:'F', w:54.7, a:10, g:`ASD BUSHIDO`},
        {d:'lotta', n:`MATTEO PESCE`, s:'M', w:75.0, a:15, g:`ASD BUSHIDO`},
        {d:'lotta', n:`ALESSIA DELLI COLLI`, s:'F', w:45.0, a:11, g:`ASD BUSHIDO`},
        {d:'lotta', n:`ASIA RESARCHI`, s:'F', w:37.0, a:12, g:`ASD BUSHIDO`},
        {d:'lotta', n:`ANTONIO MARANDOLA`, s:'M', w:67.0, a:11, g:`ASD BUSHIDO`},
        // Samuele D'Amore rimosso come richiesto
        {d:'lotta', n:`INSAFE KHADRA`, s:'F', w:39.0, a:11, g:`TAI SHIN KAI`},
        {d:'lotta', n:`RITYA HASSANI`, s:'F', w:29.8, a:8, g:`TAI SHIN KAI`},
        {d:'lotta', n:`ANTONIO LUONGO`, s:'M', w:55.0, a:11, g:`TAI SHIN KAI`},
        {d:'lotta', n:`ALESSANDRO RUGGIANO`, s:'M', w:39.7, a:10, g:`TAI SHIN KAI`},
        {d:'lotta', n:`IVAN CASABURI`, s:'M', w:38.6, a:13, g:`TAI SHIN KAI`},
        {d:'lotta', n:`ANTONIO TESSITORE`, s:'M', w:57.0, a:10, g:`TAI SHIN KAI`},
        {d:'lotta', n:`MARIO BATTISTA`, s:'M', w:46.7, a:11, g:`TAI SHIN KAI`},
        {d:'lotta', n:`MICHELE BORTONE`, s:'M', w:67.0, a:11, g:`TAI SHIN KAI`},
        {d:'lotta', n:`GIUSEPPE SIENO`, s:'M', w:58.1, a:12, g:`TAI SHIN KAI`},
        {d:'lotta', n:`SAMUELE CHIARIELLO`, s:'M', w:34.0, a:12, g:`TAI SHIN KAI`},
        {d:'lotta', n:`FIORELLA CARBISIERO`, s:'F', w:60.0, a:13, g:`TAI SHIN KAI`},
        {d:'lotta', n:`ALESSANDRA PETRILLO`, s:'F', w:57.0, a:13, g:`TAI SHIN KAI`},
        {d:'lotta', n:`FABIO DI SANTO`, s:'M', w:42.0, a:11, g:`TAI SHIN KAI`},
        {d:'lotta', n:`CIRO ARCIPRETE`, s:'M', w:61.0, a:14, g:`TAI SHIN KAI`},
        {d:'lotta', n:`PASQUALE BELARDO`, s:'M', w:73.5, a:12, g:`TAI SHIN KAI`},
        {d:'lotta', n:`NICOLA SIENO`, s:'M', w:49.0, a:11, g:`TAI SHIN KAI`},
        {d:'lotta', n:`HAROUN KHADRA`, s:'M', w:26.0, a:7, g:`TAI SHIN KAI`},
        {d:'lotta', n:`SALVATORE LUONGO`, s:'M', w:26.2, a:8, g:`TAI SHIN KAI`},
        {d:'lotta', n:`ALESSANDRO TESSITORE`, s:'M', w:40.0, a:8, g:`TAI SHIN KAI`},
        {d:'lotta', n:`CLAUDIA VITALE`, s:'F', w:27.1, a:8, g:`TAI SHIN KAI`},
        {d:'lotta', n:`RITAJ HASSANI`, s:'F', w:40.8, a:9, g:`TAI SHIN KAI`},
        {d:'lotta', n:`DIEGO RUGGIANO`, s:'M', w:28.7, a:8, g:`TAI SHIN KAI`},
        {d:'lotta', n:`NICHOLAS D'ANGELO`, s:'M', w:30.5, a:8, g:`TAI SHIN KAI`},
        {d:'lotta', n:`RAFFAELE PEZZELLA`, s:'M', w:43.0, a:8, g:`TAI SHIN KAI`},
        {d:'lotta', n:`SILVANA MUROLO`, s:'F', w:31.1, a:8, g:`TAI SHIN KAI`},
        {d:'lotta', n:`SALVATORE BELARDO`, s:'M', w:25.8, a:8, g:`TAI SHIN KAI`},
        {d:'lotta', n:`RAFFAELE CAPASSO`, s:'M', w:25.0, a:8, g:`TAI SHIN KAI`},
        {d:'lotta', n:`ANTONIO MERENDA`, s:'M', w:58.0, a:10, g:`TAI SHIN KAI`},
        {d:'lotta', n:`ALESSANDRO GRANIGLIA`, s:'M', w:71.0, a:15, g:`SSD LIFE`},
        {d:'lotta', n:`RAOUL GIANLAVIGNA`, s:'M', w:70.1, a:15, g:`SSD LIFE`},
        {d:'lotta', n:`CHRISTIAN CORRADO`, s:'M', w:50.0, a:14, g:`SSD LIFE`},
        {d:'lotta', n:`MATTEO COZZOLINO`, s:'M', w:60.0, a:14, g:`SSD LIFE`},
        {d:'lotta', n:`FRANCESCO CAPPETTA`, s:'M', w:45.0, a:14, g:`SSD LIFE`},
        {d:'lotta', n:`GABRIEL CACCIOPPOLI`, s:'M', w:63.0, a:14, g:`SSD LIFE`},
        {d:'lotta', n:`RAFFAELE BORRELLI`, s:'M', w:54.0, a:12, g:`SSD LIFE`},
        {d:'lotta', n:`JASMINE DI MARZO`, s:'F', w:89.0, a:12, g:`SSD LIFE`},
        {d:'lotta', n:`VITTORIA MARTUSCIELLO`, s:'F', w:63.0, a:12, g:`SSD LIFE`},
        {d:'lotta', n:`SIMONE CATURANO`, s:'M', w:34.0, a:12, g:`SSD LIFE`},
        {d:'lotta', n:`FABRIZIO MINOPOLI`, s:'M', w:39.0, a:12, g:`SSD LIFE`},
        {d:'lotta', n:`CHRISTIAN CATURANO`, s:'M', w:26.0, a:11, g:`SSD LIFE`},
        {d:'lotta', n:`CHRISTIAN DE ANGELIS`, s:'M', w:33.0, a:10, g:`SSD LIFE`},
        {d:'lotta', n:`ROMEO MONTELLA`, s:'M', w:28.0, a:10, g:`SSD LIFE`},
        {d:'lotta', n:`GABRIELE IMPROTA`, s:'M', w:44.0, a:11, g:`SSD LIFE`},
        {d:'lotta', n:`VINCENZO OMBRA`, s:'M', w:44.0, a:10, g:`SSD LIFE`},
        {d:'lotta', n:`ALESSANDRO TONELLI`, s:'M', w:54.0, a:10, g:`SSD LIFE`},
        {d:'lotta', n:`LUIGI DEL SOLE`, s:'M', w:27.0, a:9, g:`SSD LIFE`},
        {d:'lotta', n:`MARIO INGENITO`, s:'M', w:39.0, a:10, g:`SSD LIFE`},
        {d:'lotta', n:`VINCENZO DI VICINO`, s:'M', w:21.0, a:7, g:`SSD LIFE`},
        {d:'lotta', n:`VINCENZO CHIANESE`, s:'M', w:22.0, a:6, g:`SSD LIFE`},
        {d:'lotta', n:`MATTHIAS LONGOBARDI`, s:'M', w:31.0, a:7, g:`SSD LIFE`},
        {d:'lotta', n:`SANTORO MELYSSA`, s:'F', w:25.0, a:11, g:`ASD CS BODY ART`},
        {d:'lotta', n:`VIETRI ILARIA`, s:'F', w:26.0, a:11, g:`ASD CS BODY ART`},
        {d:'lotta', n:`PLAITANO LIDIA`, s:'F', w:45.0, a:10, g:`ASD CS BODY ART`},
        {d:'lotta', n:`MAZZEO LINDA`, s:'F', w:29.0, a:11, g:`ASD CS BODY ART`},
        {d:'lotta', n:`NAPPI ALESSANDRA`, s:'F', w:33.0, a:11, g:`ASD CS BODY ART`},
        {d:'lotta', n:`CASABURI RAFFAELLA`, s:'F', w:68.0, a:13, g:`ASD CS BODY ART`},
        {d:'lotta', n:`LANDI MICHELA`, s:'F', w:48.0, a:14, g:`ASD CS BODY ART`},
        {d:'lotta', n:`RICCO MORGAN`, s:'M', w:63.0, a:10, g:`ASD CS BODY ART`},
        {d:'lotta', n:`VITALE PIETRO`, s:'M', w:40.0, a:11, g:`ASD CS BODY ART`},
        {d:'lotta', n:`CASTELLUCCIO GIUSEPPE`, s:'M', w:45.0, a:10, g:`ASD CS BODY ART`},
        {d:'lotta', n:`CASABURI ALFONSO`, s:'M', w:57.0, a:13, g:`ASD CS BODY ART`},
        {d:'lotta', n:`ALFIERO FRANCESCO`, s:'M', w:29.0, a:12, g:`ASD CS BODY ART`},
        {d:'lotta', n:`STAN ROBERT`, s:'M', w:45.0, a:15, g:`ASD CS BODY ART`},
        {d:'lotta', n:`SARA IOVINELLA`, s:'F', w:36.0, a:8, g:`TAI SHIN KAI`}
    ];

    // ===========================================
    // 2. MATCH FORZATI (OVERRIDE MANUALE)
    // ===========================================
    const manualMatches = {
        'kick': {
            'M (10-11) -45': [['MARIO BATTISTA', 'BYE']],
            'M (14-15) -65': [['GABRIEL CACCIOPPOLI', 'MATTEO COZZOLINO']],
            'M (14-15) +70': [['ALESSANDRO GRANIGLIA', 'MATTEO PESCE'], ['DOMENICO DI GIORGIO', 'RAOUL GIANLAVIGNA']]
        },
        'lotta': {
            'F (8-9) -35': [['SILVANA MUROLO', 'BYE']],
            'F (8-9) -30': [['RITYA HASSANI', 'CLAUDIA VITALE']],
            'M (8-9) -27': [['RAFFAELE CAPASSO', 'SALVATORE BELARDO'], ['LUIGI DEL SOLE', 'SALVATORE LUONGO']],
            'M (8-9) -31': [['NICHOLAS D\'ANGELO', 'VINCENZO STABILE'], ['DIEGO RUGGIANO', 'BYE']],
            'M (10-11) -50': [['MATTEO MASI', 'NICOLA SIENO'], ['MARIO BATTISTA', 'BYE']],
            'M (10-11) +55': [['ANTONIO TESSITORE', 'RICCO MORGAN'], ['ANTONIO MARANDOLA', 'MICHELE BORTONE'], ['ANTONIO MERENDA', 'BYE']],
            'M (14-15) -65': [['CIRO ARCIPRETE', 'MATTEO COZZOLINO'], ['GABRIEL CACCIOPPOLI', 'BYE']], // BYE perché Samuele è stato rimosso
            'M (14-15) +70': [['RAOUL GIANLAVIGNA', 'BYE'], ['ALESSANDRO GRANIGLIA', 'MATTEO PESCE']]
        },
        'kumite': {
            'MIX (8-9) -45': [['ANTONIO DI MURO', 'ROBERTO RUSSO'], ['ARTEM PEREHKREST', 'PIETRO FORTINO']]
        }
    };

    const hiddenCategories = [
        'M (14-15) -60', 'M (14-15) -70', 'MIX (6-7) -37', 'MIX (8-9) -50'
    ];

    // ===========================================
    // 3. LOGICA CATEGORIE
    // ===========================================
    function getCategory(a) {
        if (a.d === 'kick') return calcKickCat(a);
        if (a.d === 'lotta') return calcLottaCat(a);
        if (a.d === 'kumite') return calcKumiteCat(a);
        return 'UNKNOWN';
    }

    function calcKickCat(a) {
        let ageG, limits;
        if(a.a <= 7) { ageG='6-7'; limits=[20,24,28,32,37]; }
        else if(a.a <= 9) { ageG='8-9'; limits=[23,27,31,35,40,45]; }
        else if(a.a <= 11) { ageG='10-11'; limits=[28,32,36,40,45,50]; }
        else if(a.a <= 13) { ageG='12-13'; limits=[30,35,40,45,50,55]; }
        else if(a.a <= 15) { ageG='14-15'; limits=[40,45,50,55,60,65,70]; }
        else { ageG='18+'; limits=[50,55,60,65,70,75,80]; }
        return formatCat(a.s, ageG, a.w, limits);
    }

    function calcLottaCat(a) {
        let ageG, limits;
        if(a.a <= 7) { ageG='6-7'; limits=[20,24,28,32,37]; }
        else if(a.a <= 9) { ageG='8-9'; limits=[23,27,30,31,35,40,45,50]; }
        else if(a.a <= 11) { ageG='10-11'; limits=[28,32,36,40,45,50,55]; }
        else if(a.a <= 13) { ageG='12-13'; limits=[30,35,40,45,50,55,60]; }
        else if(a.a <= 15) { ageG='14-15'; limits=[40,45,50,55,60,65,70]; }
        else { ageG='18-40'; limits=[57,63,69,74,79,84,89]; }
        return formatCat(a.s, ageG, a.w, limits);
    }

    function calcKumiteCat(a) {
        let ageG, limits;
        if(a.a <= 5) { ageG='3-5'; limits=[20]; }
        else if(a.a <= 7) { ageG='6-7'; limits=[20,24,28,32,37]; }
        else if(a.a <= 9) { ageG='8-9'; limits=[23,27,31,35,40,45,50]; }
        else { ageG='10-11'; limits=[28,32,36,40,45,50]; }
        return formatCat('MIX', ageG, a.w, limits);
    }

    function formatCat(sex, age, w, limits) {
        let wClass = `+${limits[limits.length-1]}`;
        for(let l of limits) {
            if(w <= l) { wClass = `-${l}`; break; }
        }
        return `${sex} (${age}) ${wClass}`;
    }

    // ===========================================
    // 4. MOTORE DI GENERAZIONE
    // ===========================================
    function runMatchmaking(disc) {
        const container = document.getElementById(disc);
        container.innerHTML = '';

        const fullDiscPool = rawData.filter(a => a.d === disc);
        const categorizedPool = fullDiscPool.map(a => ({...a, cat: getCategory(a)}));
        const groups = {};
        categorizedPool.forEach(a => {
            if(!groups[a.cat]) groups[a.cat] = [];
            groups[a.cat].push(a);
        });

        const sortedCats = Object.keys(groups).sort((a,b) => {
            const ageA = parseInt(a.match(/\((\d+)/)?.[1] || 0);
            const ageB = parseInt(b.match(/\((\d+)/)?.[1] || 0);
            if(ageA !== ageB) return ageA - ageB;
            return a.localeCompare(b);
        });

        sortedCats.forEach(cat => {
            if (hiddenCategories.includes(cat)) return;

            const group = groups[cat];
            group.sort((a,b) => a.w - b.w);

            const section = document.createElement('div');
            section.className = 'cat-block';
            
            let html = `
                <div class="cat-header" onclick="this.parentElement.querySelector('.cat-body').style.display = this.parentElement.querySelector('.cat-body').style.display === 'none' ? 'block' : 'none'">
                    <span class="cat-title">${cat}</span>
                    <span class="cat-badge">${group.length} Atleti</span>
                </div>
                <div class="cat-body"><div class="match-grid">
            `;

            if (manualMatches[disc] && manualMatches[disc][cat]) {
                manualMatches[disc][cat].forEach(pair => {
                    const findAthlete = (name) => {
                        return fullDiscPool.find(x => x.n.toUpperCase().trim() === name.toUpperCase().trim());
                    };

                    const at1 = findAthlete(pair[0]) || {n: pair[0], g: 'N/A'};
                    const at2 = pair[1] === 'BYE' ? {n:'BYE', g:'Passa il turno'} : (findAthlete(pair[1]) || {n: pair[1], g: 'N/A'});
                    
                    html += renderMatch(at1, at2, (at1.g === at2.g && at1.g !== 'N/A' && at2.g !== 'Passa il turno'));
                });
            } else {
                const queue = [...group];
                if (queue.length === 1) {
                    html += renderWinner(queue[0]);
                } else {
                    while(queue.length > 0) {
                        if (queue.length === 1) {
                            html += renderMatch(queue.shift(), {n:'BYE', g:'Passa il turno', a:'', w:''}, false);
                        } else {
                            const p1 = queue.shift();
                            let p2Index = queue.findIndex(x => x.g !== p1.g);
                            const isDerby = (p2Index === -1);
                            if(isDerby) p2Index = 0;
                            const p2 = queue.splice(p2Index, 1)[0];
                            html += renderMatch(p1, p2, isDerby);
                        }
                    }
                }
            }

            html += `</div></div>`;
            section.innerHTML = html;
            container.appendChild(section);
        });
    }

    function renderMatch(p1, p2, isDerby) {
        return `
            <div class="match-card">
                <div class="match-info">
                    <span>Round 1</span>
                    ${isDerby ? '<span class="derby-tag">DERBY OBBLIGATO</span>' : ''}
                </div>
                <div class="vs-circle">VS</div>
                <div class="competitor">
                    <div class="comp-details">
                        <span class="comp-name">${p1.n}</span>
                        <div class="comp-meta">${p1.a ? p1.a + ' Anni • ' + p1.w + 'kg' : ''}</div>
                        <div class="comp-gym">${p1.g}</div>
                    </div>
                </div>
                <div class="competitor">
                    <div class="comp-details">
                        <span class="comp-name">${p2.n}</span>
                        <div class="comp-meta">${p2.a ? p2.a + ' Anni • ' + p2.w + 'kg' : ''}</div>
                        <div class="comp-gym">${p2.g}</div>
                    </div>
                </div>
            </div>
        `;
    }

    function renderWinner(p) {
        return `
            <div class="winner-card">
                <i class="fas fa-trophy win-icon"></i>
                <div class="win-label">Vincitore a Tavolino</div>
                <div class="comp-name" style="margin-top:10px;">${p.n}</div>
                <div class="comp-meta">${p.a} Anni • ${p.w}kg</div>
                <div class="comp-gym">${p.g}</div>
            </div>
        `;
    }

    function switchTab(disc) {
        document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
        document.querySelector(`.nav-btn[data-target="${disc}"]`).classList.add('active');
        document.querySelectorAll('.discipline-section').forEach(s => s.classList.remove('active'));
        document.getElementById(disc).classList.add('active');
        runMatchmaking(disc);
    }

    function filterContent() {
        const term = document.getElementById('searchInput').value.toLowerCase();
        document.querySelectorAll('.cat-block').forEach(block => {
            block.style.display = block.innerText.toLowerCase().includes(term) ? 'block' : 'none';
        });
    }

    window.onload = () => switchTab('kick');
</script>
</body>
</html>
