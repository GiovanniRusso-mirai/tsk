<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2685.3">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
  </style>
</head>
<body>
<p class="p1">&lt;!DOCTYPE html&gt;</p>
<p class="p1">&lt;html lang="it"&gt;</p>
<p class="p1">&lt;head&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;meta charset="UTF-8"&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;title&gt;TSK Ryu - Iscrizioni Torneo&lt;/title&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;style&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>:root { --primary: #d32f2f; --accent: #1a237e; --bg: #f8f9fa; }</p>
<p class="p1"><span class="Apple-converted-space">        </span>body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: var(--bg); padding: 20px; color: #333; }</p>
<p class="p1"><span class="Apple-converted-space">        </span>.container { max-width: 850px; margin: 0 auto; background: white; border-radius: 20px; box-shadow: 0 15px 35px rgba(0,0,0,0.1); overflow: hidden; }</p>
<p class="p1"><span class="Apple-converted-space">        </span>.header { text-align: center; padding: 25px; border-bottom: 5px solid var(--primary); background: #fff; }</p>
<p class="p1"><span class="Apple-converted-space">        </span>.logo { max-width: 120px; margin-bottom: 10px; }</p>
<p class="p1"><span class="Apple-converted-space">        </span>.form-section { padding: 30px; }</p>
<p class="p1"><span class="Apple-converted-space">        </span>.atleta-card { background: #fff; border: 1px solid #ddd; border-radius: 12px; padding: 25px; margin-bottom: 25px; position: relative; transition: border-color 0.3s; }</p>
<p class="p1"><span class="Apple-converted-space">        </span>.atleta-card:hover { border-color: var(--accent); }</p>
<p class="p1"><span class="Apple-converted-space">        </span>.checkbox-group { display: flex; flex-wrap: wrap; gap: 15px; margin-top: 10px; background: #fdfdfd; padding: 15px; border-radius: 8px; border: 1px solid #eee; }</p>
<p class="p1"><span class="Apple-converted-space">        </span>.checkbox-item { display: flex; align-items: center; gap: 8px; font-weight: 600; cursor: pointer; font-size: 0.9rem; }</p>
<p class="p1"><span class="Apple-converted-space">        </span>.checkbox-item input { width: auto; margin: 0; cursor: pointer; transform: scale(1.2); }</p>
<p class="p1"><span class="Apple-converted-space">        </span>label { display: block; font-size: 0.75rem; font-weight: 700; margin-bottom: 8px; color: #666; text-transform: uppercase; }</p>
<p class="p1"><span class="Apple-converted-space">        </span>input[type="text"], input[type="number"] { width: 100%; padding: 12px; border: 2px solid #dfe6e9; border-radius: 8px; box-sizing: border-box; font-size: 1rem; }</p>
<p class="p1"><span class="Apple-converted-space">        </span>input:focus { border-color: var(--accent); outline: none; }</p>
<p class="p1"><span class="Apple-converted-space">        </span>.btn-submit { width: 100%; padding: 18px; background: var(--primary); color: white; border: none; border-radius: 10px; font-weight: 800; cursor: pointer; font-size: 1.2rem; transition: background 0.3s; }</p>
<p class="p1"><span class="Apple-converted-space">        </span>.btn-submit:hover { background: #b71c1c; }</p>
<p class="p1"><span class="Apple-converted-space">        </span>#modal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.85); backdrop-filter: blur(5px); justify-content:center; align-items:center; z-index:100; }</p>
<p class="p1"><span class="Apple-converted-space">        </span>.modal-box { background:white; padding:35px; border-radius:15px; max-width:550px; width:90%; box-shadow: 0 20px 40px rgba(0,0,0,0.2); }</p>
<p class="p1"><span class="Apple-converted-space">        </span>.recap-item { border-bottom: 1px solid #eee; padding: 10px 0; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/style&gt;</p>
<p class="p1">&lt;/head&gt;</p>
<p class="p1">&lt;body&gt;</p>
<p class="p2"><br></p>
<p class="p1">&lt;div class="container"&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div class="header"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;img src="https://scontent-fco2-1.xx.fbcdn.net/v/t39.30808-6/299940804_510546830876553_8892043649465700842_n.png?_nc_cat=109&amp;ccb=1-7&amp;_nc_sid=6ee11a&amp;_nc_ohc=KfRaKBcy4bYQ7kNvwFtD0vT&amp;_nc_oc=AdkaCiXWCryfJoULFVYg7WqF66mFvgnD73pCypsoJexFYoXcJK4hiXQ1fWi0T7RxClU&amp;_nc_zt=23&amp;_nc_ht=scontent-fco2-1.xx&amp;_nc_gid=BSB6zC-CWoJRDzEBzyPNbA&amp;oh=00_AftdHc8vIl8F0rP-oic5rZgt9rrt7UQ2uuNWmDMUb5rHiQ&amp;oe=6983C883" alt="Logo TSK" class="logo"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;h2 style="color:var(--accent); margin:10px 0; font-size: 1.8rem;"&gt;TAI SHIN DO KAI RYU&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;p style="margin:0; font-weight: bold; color: #666;"&gt;MODULO ISCRIZIONE ATLETI&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;form id="torneoForm" class="form-section"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div style="display:grid; grid-template-columns: 1fr 1fr; gap:20px; margin-bottom:30px;"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div&gt;&lt;label&gt;Palestra / ASD&lt;/label&gt;&lt;input type="text" id="palestra" placeholder="Nome Palestra" required&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div&gt;&lt;label&gt;Responsabile Tecnico&lt;/label&gt;&lt;input type="text" id="responsabile" placeholder="Nome e Cognome" required&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div id="listaAtleti"&gt;&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;button type="button" onclick="renderAtleta()" style="width:100%; padding:15px; margin-bottom:20px; background:#fff; border:2px dashed var(--accent); color: var(--accent); cursor:pointer; font-weight:bold; border-radius:10px;"&gt;+ AGGIUNGI ATLETA ALLA LISTA&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;button type="button" class="btn-submit" onclick="validazioneEAnteprima()"&gt;REVISIONE E INVIO DATI&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/form&gt;</p>
<p class="p1">&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1">&lt;div id="modal"&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div class="modal-box"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div id="recapSpace"&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</p>
<p class="p1">&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1">&lt;script&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>// URL aggiornato con il tuo ultimo deploy</p>
<p class="p1"><span class="Apple-converted-space">    </span>const GOOGLE_URL = "https://script.google.com/macros/s/AKfycbyy9TpDCSXKG6hJCq3M16hL9hx4icWzBfI_SiYhjc5xKa7ViopcrHsu2K8-gg0Mhbk-kw/exec";</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>function renderAtleta() {</p>
<p class="p1"><span class="Apple-converted-space">        </span>const container = document.getElementById('listaAtleti');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const count = container.children.length + 1;</p>
<p class="p1"><span class="Apple-converted-space">        </span>const div = document.createElement('div');</p>
<p class="p1"><span class="Apple-converted-space">        </span>div.className = 'atleta-card';</p>
<p class="p1"><span class="Apple-converted-space">        </span>div.innerHTML = `</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;button type="button" onclick="this.parentElement.remove()" style="position:absolute; top:15px; right:15px; color:#d32f2f; border:none; background:none; cursor:pointer; font-weight:bold;"&gt;ELIMINA&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;label style="color:var(--accent); font-size: 1rem;"&gt;ISCRIZIONE ATLETA #${count}&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div style="display:grid; grid-template-columns: 2fr 1fr 1fr; gap:15px; margin-bottom:20px; margin-top:10px;"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div&gt;&lt;label&gt;Nome e Cognome&lt;/label&gt;&lt;input type="text" class="nome" required&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div&gt;&lt;label&gt;Peso (kg)&lt;/label&gt;&lt;input type="number" class="peso" step="0.1" required&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div&gt;&lt;label&gt;Età&lt;/label&gt;&lt;input type="number" class="eta" required&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;label&gt;Discipline Selezionate (Anche Multiple):&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div class="checkbox-group"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;label class="checkbox-item"&gt;&lt;input type="checkbox" class="gara" value="Kumitè Kids"&gt; Kumitè Kids&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;label class="checkbox-item"&gt;&lt;input type="checkbox" class="gara" value="Kick Jitsu"&gt; Kick Jitsu&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;label class="checkbox-item"&gt;&lt;input type="checkbox" class="gara" value="Lotta a terra"&gt; Lotta a terra&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>`;</p>
<p class="p1"><span class="Apple-converted-space">        </span>container.appendChild(div);</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>function validazioneEAnteprima() {</p>
<p class="p1"><span class="Apple-converted-space">        </span>const palestra = document.getElementById('palestra').value;</p>
<p class="p1"><span class="Apple-converted-space">        </span>const responsabile = document.getElementById('responsabile').value;</p>
<p class="p1"><span class="Apple-converted-space">        </span>const cards = document.getElementsByClassName('atleta-card');</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>if(!palestra || !responsabile) return alert("Inserisci i dati della Palestra e del Responsabile!");</p>
<p class="p1"><span class="Apple-converted-space">        </span>if(cards.length === 0) return alert("Aggiungi almeno un atleta prima di inviare!");</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>let recap = `&lt;h2 style="color:var(--accent); margin-top:0;"&gt;Riepilogo Iscrizioni&lt;/h2&gt;&lt;p&gt;&lt;b&gt;Palestra:&lt;/b&gt; ${palestra}&lt;/p&gt;&lt;div style="max-height:300px; overflow-y:auto; margin-bottom:20px; border-top:1px solid #eee;"&gt;`;</p>
<p class="p1"><span class="Apple-converted-space">        </span>let valid = true;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>for (let card of cards) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>const nome = card.querySelector('.nome').value;</p>
<p class="p1"><span class="Apple-converted-space">            </span>const peso = card.querySelector('.peso').value;</p>
<p class="p1"><span class="Apple-converted-space">            </span>const eta = card.querySelector('.eta').value;</p>
<p class="p1"><span class="Apple-converted-space">            </span>const selezionate = Array.from(card.querySelectorAll('.gara:checked')).map(c =&gt; c.value);</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>if(!nome || !peso || !eta || selezionate.length === 0) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>alert("Compila tutti i campi e seleziona almeno una gara per ogni atleta!");</p>
<p class="p1"><span class="Apple-converted-space">                </span>valid = false; break;</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>recap += `&lt;div class="recap-item"&gt;&lt;b&gt;${nome}&lt;/b&gt; (${peso}kg, ${eta} anni)&lt;br&gt;&lt;small&gt;Discipline: ${selezionate.join(', ')}&lt;/small&gt;&lt;/div&gt;`;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>if(valid) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>recap += `&lt;/div&gt;`;</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('recapSpace').innerHTML = recap + `</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;button onclick="invioFinale()" style="width:100%; padding:15px; background:#27ae60; color:white; border:none; border-radius:8px; margin-top:10px; font-weight:bold; cursor:pointer; font-size:1.1rem;"&gt;CONFERMA E INVIA ORA&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;button onclick="document.getElementById('modal').style.display='none'" style="width:100%; margin-top:10px; background:none; border:none; cursor:pointer; color:#666; font-weight:bold;"&gt;TORNA ALLA MODIFICA&lt;/button&gt;`;</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('modal').style.display = 'flex';</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>async function invioFinale() {</p>
<p class="p1"><span class="Apple-converted-space">        </span>const payload = {</p>
<p class="p1"><span class="Apple-converted-space">            </span>palestra: document.getElementById('palestra').value,</p>
<p class="p1"><span class="Apple-converted-space">            </span>responsabile: document.getElementById('responsabile').value,</p>
<p class="p1"><span class="Apple-converted-space">            </span>atleti: Array.from(document.getElementsByClassName('atleta-card')).map(card =&gt; ({</p>
<p class="p1"><span class="Apple-converted-space">                </span>nome: card.querySelector('.nome').value,</p>
<p class="p1"><span class="Apple-converted-space">                </span>peso: card.querySelector('.peso').value,</p>
<p class="p1"><span class="Apple-converted-space">                </span>eta: card.querySelector('.eta').value,</p>
<p class="p1"><span class="Apple-converted-space">                </span>gare: Array.from(card.querySelectorAll('.gara:checked')).map(c =&gt; c.value)</p>
<p class="p1"><span class="Apple-converted-space">            </span>}))</p>
<p class="p1"><span class="Apple-converted-space">        </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>document.getElementById('recapSpace').innerHTML = "&lt;h2 style='text-align:center;'&gt;TRASMISSIONE DATI...&lt;/h2&gt;&lt;p style='text-align:center;'&gt;Attendere la conferma, non chiudere la pagina.&lt;/p&gt;";</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>try {</p>
<p class="p1"><span class="Apple-converted-space">            </span>await fetch(GOOGLE_URL, {<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>method: 'POST',<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>mode: 'no-cors',<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>body: JSON.stringify(payload)<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>});</p>
<p class="p1"><span class="Apple-converted-space">            </span>alert("ISCRIZIONI INVIATE CON SUCCESSO ALLA TAI SHIN DO KAI RYU!");</p>
<p class="p1"><span class="Apple-converted-space">            </span>location.reload();</p>
<p class="p1"><span class="Apple-converted-space">        </span>} catch (err) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>alert("Errore di connessione. Riprova.");</p>
<p class="p1"><span class="Apple-converted-space">            </span>document.getElementById('modal').style.display = 'none';</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>// Inizializza con la prima scheda atleta</p>
<p class="p1"><span class="Apple-converted-space">    </span>renderAtleta();</p>
<p class="p1">&lt;/script&gt;</p>
<p class="p1">&lt;/body&gt;</p>
<p class="p1">&lt;/html&gt;</p>
</body>
</html>
